# Agentå›¾æ ‡ç¼–è¾‘åŠŸèƒ½å®Œæˆæ€»ç»“

## åŠŸèƒ½æ¦‚è¿°

å®Œæˆäº†Agentå›¾æ ‡ç¼–è¾‘åŠŸèƒ½çš„å¼€å‘ï¼Œç”¨æˆ·ç°åœ¨å¯ä»¥ä¸ºAI Agentè‡ªå®šä¹‰å¤´åƒï¼Œæ”¯æŒå¤šç§æ–¹å¼è®¾ç½®Agentå›¾æ ‡ã€‚

## ä¸»è¦åŠŸèƒ½

### 1. é¢„è®¾å›¾æ ‡é›†åˆ
- **ä¸°å¯Œçš„è¡¨æƒ…ç¬¦å·**ï¼šæä¾›56ä¸ªç²¾å¿ƒæŒ‘é€‰çš„è¡¨æƒ…ç¬¦å·ï¼Œæ¶µç›–æœºå™¨äººã€ç§‘æŠ€ã€å­¦ä¹ ã€å¨±ä¹ç­‰ä¸»é¢˜
- **ç½‘æ ¼å±•ç¤º**ï¼š8åˆ—ç½‘æ ¼å¸ƒå±€ï¼Œæ”¯æŒæ»šåŠ¨æµè§ˆ
- **å³æ—¶é¢„è§ˆ**ï¼šç‚¹å‡»å³å¯é¢„è§ˆæ•ˆæœ
- **è‡ªå®šä¹‰è¾“å…¥**ï¼šæ”¯æŒç”¨æˆ·è¾“å…¥è‡ªå®šä¹‰è¡¨æƒ…ç¬¦å·æˆ–æ–‡å­—

### 2. èƒŒæ™¯è‰²é¢„è®¾
- **12ç§ç²¾é€‰é¢œè‰²**ï¼šè“ã€ç´«ã€ç²‰ã€çº¢ã€æ©™ã€é»„ã€ç»¿ã€é’ã€é›ã€ç°ã€çŸ³ã€é”Œ
- **ç›´è§‚é€‰æ‹©**ï¼šåœ†å½¢è‰²å—å±•ç¤ºï¼Œæ‚¬åœæ”¾å¤§æ•ˆæœ
- **é€‰ä¸­æ ‡è¯†**ï¼šå½“å‰é€‰ä¸­é¢œè‰²æ˜¾ç¤ºå‹¾å·å’Œè¾¹æ¡†é«˜äº®

### 3. å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- **æ‹–æ‹½ä¸Šä¼ **ï¼šæ”¯æŒæ‹–æ‹½å›¾ç‰‡æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
- **ç‚¹å‡»é€‰æ‹©**ï¼šä¼ ç»Ÿæ–‡ä»¶é€‰æ‹©æ–¹å¼
- **å®æ—¶é¢„è§ˆ**ï¼šæ‹–æ‹½è¿‡ç¨‹ä¸­çš„è§†è§‰åé¦ˆ
- **æ ¼å¼éªŒè¯**ï¼šè‡ªåŠ¨æ£€æŸ¥æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶
- **å›¾ç‰‡è£å‰ª**ï¼šé›†æˆImageCropperç»„ä»¶ï¼Œæ”¯æŒ1:1æ¯”ä¾‹è£å‰ª
- **æœåŠ¡å™¨ä¸Šä¼ **ï¼šçœŸå®æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è·å–URL

### 4. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **æ ‡ç­¾é¡µåˆ‡æ¢**ï¼šå›¾æ ‡é€‰æ‹©å’Œå›¾ç‰‡ä¸Šä¼ åˆ†ç¦»ä¸ºä¸åŒæ ‡ç­¾
- **å³æ—¶é¢„è§ˆ**ï¼šå¤´åƒé…ç½®å˜æ›´æ—¶å®æ—¶æ˜¾ç¤ºæ•ˆæœ
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯æç¤ºå’ŒToasté€šçŸ¥
- **åŠ è½½çŠ¶æ€**ï¼šä¸Šä¼ è¿‡ç¨‹ä¸­çš„åŠ è½½æŒ‡ç¤ºå™¨

## æŠ€æœ¯å®ç°

### 1. æ–°å¢ç»„ä»¶
- **AgentAvatarEditor**ï¼šå®Œæ•´çš„å¤´åƒç¼–è¾‘å™¨ç»„ä»¶
  - ä½ç½®ï¼š`web/src/components/common/AgentAvatarEditor.tsx`
  - åŠŸèƒ½ï¼šå›¾æ ‡é€‰æ‹©ã€èƒŒæ™¯è‰²è®¾ç½®ã€å›¾ç‰‡ä¸Šä¼ ã€æ‹–æ‹½æ”¯æŒ

### 2. APIæ‰©å±•
- **FileApiService.uploadAgentAvatar()**ï¼šæ–°å¢Agentå¤´åƒä¸Šä¼ æ–¹æ³•
  - æ”¯æŒFileå’ŒBlobç±»å‹æ–‡ä»¶
  - è¿”å›ä¸Šä¼ ç»“æœå’Œå›¾ç‰‡URL
  - å®Œå–„çš„é”™è¯¯å¤„ç†

### 3. ç»„ä»¶é›†æˆ
- **AgentEditoræ›´æ–°**ï¼šæ›¿æ¢åŸæœ‰ç®€å•çš„å¤´åƒç¼–è¾‘ä¸ºå®Œæ•´çš„ç¼–è¾‘å™¨
- **ç±»å‹å®‰å…¨**ï¼šåŸºäºç°æœ‰AvatarConfigæ¥å£
- **çŠ¶æ€ç®¡ç†**ï¼šä¸Agentè¡¨å•æ•°æ®åŒå‘ç»‘å®š

### 4. æ‹–æ‹½åŠŸèƒ½å®ç°
```typescript
// æ‹–æ‹½äº‹ä»¶å¤„ç†
const handleDragOver = (e: React.DragEvent) => {
  e.preventDefault();
  setIsDragOver(true);
};

const handleDrop = (e: React.DragEvent) => {
  e.preventDefault();
  setIsDragOver(false);
  const files = Array.from(e.dataTransfer.files);
  const file = files[0];
  if (file) {
    processFile(file);
  }
};
```

## é¢„è®¾èµ„æº

### å›¾æ ‡é›†åˆï¼ˆ56ä¸ªï¼‰
```
ğŸ¤– ğŸ¯ ğŸ’¡ ğŸš€ â­ ğŸ”¥ ğŸ’« âœ¨ 
ğŸ¨ ğŸ­ ğŸª ğŸ² ğŸ¸ ğŸµ ğŸ¶ ğŸ¤
ğŸ“š ğŸ“– ğŸ“ ğŸ“Š ğŸ“ˆ ğŸ“‰ ğŸ’» âŒ¨ï¸
ğŸ”® ğŸŠ ğŸ‰ ğŸˆ ğŸ ğŸ† ğŸ¥‡ ğŸ¯
ğŸŒŸ ğŸ’ ğŸ‘‘ ğŸ”± âš¡ ğŸŒ™ â˜€ï¸ ğŸŒˆ
ğŸ¦„ ğŸ‰ ğŸ¦‹ ğŸ™ ğŸŒ¸ ğŸŒº ğŸŒ» ğŸŒ¹
ğŸ ğŸŠ ğŸ‹ ğŸ‡ ğŸ¥‘ ğŸ“ ğŸ‘ ğŸ¥
```

### é¢œè‰²æ–¹æ¡ˆï¼ˆ12ç§ï¼‰
- è“è‰² (`bg-blue-500`, `#3b82f6`)
- ç´«è‰² (`bg-purple-500`, `#8b5cf6`) 
- ç²‰è‰² (`bg-pink-500`, `#ec4899`)
- çº¢è‰² (`bg-red-500`, `#ef4444`)
- æ©™è‰² (`bg-orange-500`, `#f97316`)
- é»„è‰² (`bg-yellow-500`, `#eab308`)
- ç»¿è‰² (`bg-green-500`, `#22c55e`)
- é’è‰² (`bg-cyan-500`, `#06b6d4`)
- é›è‰² (`bg-indigo-500`, `#6366f1`)
- ç°è‰² (`bg-gray-500`, `#6b7280`)
- çŸ³è‰² (`bg-slate-500`, `#64748b`)
- é”Œè‰² (`bg-zinc-500`, `#71717a`)

## æ–‡ä»¶å˜æ›´

### æ–°å¢æ–‡ä»¶
- `web/src/components/common/AgentAvatarEditor.tsx` - å¤´åƒç¼–è¾‘å™¨ç»„ä»¶

### ä¿®æ”¹æ–‡ä»¶
- `web/src/services/api/FileApiService.ts` - æ·»åŠ uploadAgentAvataræ–¹æ³•
- `web/src/pages/chat/AgentEditor.tsx` - é›†æˆæ–°çš„å¤´åƒç¼–è¾‘å™¨

## ä½¿ç”¨æ–¹å¼

### 1. åœ¨AgentEditorä¸­ä½¿ç”¨
```tsx
<AgentAvatarEditor
  avatar={formData.app_preset.avatar}
  name={formData.app_preset.name || 'Agent'}
  onChange={(avatar) => updateAppPreset('avatar', avatar)}
/>
```

### 2. æ•°æ®ç»“æ„
```typescript
interface AvatarConfig {
  emoji?: string;
  bg_color?: string;
  variant: 'emoji' | 'link';
  link?: string;
}
```

## åŠŸèƒ½æµ‹è¯•

è¦æµ‹è¯•æ–°åŠŸèƒ½ï¼š

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
```bash
cd web && npm run dev
cd server && python main.py
```

2. è®¿é—® Agent ç¼–è¾‘é¡µé¢
3. ç‚¹å‡»"åº”ç”¨é…ç½®"æŒ‰é’®
4. åœ¨å¤´åƒç¼–è¾‘åŒºåŸŸæµ‹è¯•ï¼š
   - é€‰æ‹©é¢„è®¾å›¾æ ‡
   - æ›´æ”¹èƒŒæ™¯é¢œè‰²  
   - ä¸Šä¼ è‡ªå®šä¹‰å›¾ç‰‡
   - æµ‹è¯•æ‹–æ‹½ä¸Šä¼ 

## ä¸‹ä¸€æ­¥æ”¹è¿›

1. **å›¾ç‰‡ç®¡ç†**ï¼šæ·»åŠ å·²ä¸Šä¼ å›¾ç‰‡çš„ç®¡ç†åŠŸèƒ½
2. **æ›´å¤šé¢„è®¾**ï¼šæ‰©å±•å›¾æ ‡å’Œé¢œè‰²é¢„è®¾é›†åˆ
3. **å›¾ç‰‡ä¼˜åŒ–**ï¼šè‡ªåŠ¨å‹ç¼©å’Œæ ¼å¼è½¬æ¢
4. **ç¼“å­˜æœºåˆ¶**ï¼šä¼˜åŒ–å›¾ç‰‡åŠ è½½æ€§èƒ½
5. **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡è®¾ç½®Agentå¤´åƒ

## æ€»ç»“

å®Œæˆäº†åŠŸèƒ½å®Œæ•´ã€ç”¨æˆ·å‹å¥½çš„Agentå›¾æ ‡ç¼–è¾‘åŠŸèƒ½ï¼Œç”¨æˆ·ç°åœ¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä¸ºAI Agentè®¾ç½®ä¸ªæ€§åŒ–å¤´åƒï¼Œæå‡äº†Agentç®¡ç†çš„ç”¨æˆ·ä½“éªŒã€‚ 